<html>
  <head>
    <title>Input Form</title>
  </head>
  <body>
    <h1>Enter your information:</h1>
    <form>
      <label>Universe:</label>
      <input type="text" name="universe"><br><br>
      <label>Character(s):</label>
      <input type="text" name="characters"><br><br>
      <label>Genre:</label>
      <input type="text" name="genre"><br><br>
      <input type="submit" value="Submit" onclick="submitForm()">
    </form>
    <script>
    function submitForm() {
      var universe = document.getElementById("universe").value;
      var characters = document.getElementById("characters").value;
      var genre = document.getElementById("genre").value;
      alert("You entered: " + universe);
    }
    async function makeCompletionRequest(prompt) {
      const endpoint = 'https://api.openai.com/v1/engines/text-davinci-002/completions';
      const apiKey = getKey();

      const options = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          prompt: prompt,
          max_tokens: 100,
          n: 1,
          stop: '',
          temperature: 0.5
        })
      };

      try {
        const response = await fetch(endpoint, options);
        const json = await response.json();
        return json.choices[0].text;
      } catch (error) {
        console.error(error);
        return '';
      }
    }
    function getKey() {
      import {
        SecretsManagerClient,
        GetSecretValueCommand,
      } from "@aws-sdk/client-secrets-manager";

      const secret_name = "openai-key";

      const client = new SecretsManagerClient({
        region: "us-east-1",
      });

      let response;

      try {
        response = await client.send(
          new GetSecretValueCommand({
            SecretId: secret_name,
            VersionStage: "AWSCURRENT", // VersionStage defaults to AWSCURRENT if unspecified
          })
        );
      } catch (error) {
        // For a list of exceptions thrown, see
        // https://docs.aws.amazon.com/secretsmanager/latest/apireference/API_GetSecretValue.html
        throw error;
    }

const secret = response.SecretString;

// Your code goes here
    }
    </script>
  </body>
</html>
